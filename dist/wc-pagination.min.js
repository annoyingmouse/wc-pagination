!function(){"use strict";class t extends HTMLElement{static get observedAttributes(){return["total","page-size","current"]}constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}get css(){return'<style>:host {display: inline-block;--active-border-color: #2c3e50;--active-background-color: #2c3e50;--inactive-border-color: #e5e5e5;--inactive-text-color: #7f8c8d;--active-text-color: #fff;--inactive-background-color: #fff;}nav {ol {display: flex;align-items: center;gap: 6px;margin: 0;padding: 0;list-style: none;width: 100%;text-align: right;li {display: inline-block;button {background: none;padding: 0;font: inherit;cursor: pointer;text-decoration: none;font-weight: bold;background-color: var(--inactive-background-color);color: var(--inactive-text-color);display: flex;align-items: center;justify-content: center;width: 44px;height: 44px;border: 1px solid var(--inactive-border-color);user-select: none;&:focus-visible {outline: 2px solid var(--active-background-color);outline-offset: 2px;}&:disabled {cursor: default;}&[aria-current="page"] {border: none;background-color: var(--active-background-color);color: var(--active-text-color);}}}}.sr-only {position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0, 0, 0, 0);white-space: nowrap;border-width: 0;}}</style>'}get html(){return`<nav aria-label="Pagination"><ol><li><button type="button"aria-label="${1===this.current?"Already on page 1":"Go to page 1"}"title="${1===this.current?"Already on page 1":"Go to page 1"}"${1===this.current?["disabled",'aria-disabled="true"'].join(" "):'data-target="1"'}>←</button></li>${this.totalPages>3&&this.current-2>=1?`<li><button type="button"aria-label="${["Go to page",this.current-3].join(" ")}"data-target="${this.current-3}"title="${["Go to page",this.current-3].join(" ")}"><span aria-hidden="true">…</span><span class="sr-only">${["Jump back three pages, to page",this.current-3].join(" ")}</span></button></li>`:""}${this.generatePages().map(t=>`<li><button type="button"${t===this.current?'aria-current="page" aria-disabled="true"':`data-target="${t}"`}aria-label="${t===this.current?["Current page, page",t].join(" "):["Go to page",t].join(" ")}"title="${t===this.current?["Current page, page",t].join(" "):["Go to page",t].join(" ")}">${t}</button></li>`).join("")}${this.totalPages>3&&this.current+2<=this.totalPages?`<li><button type="button"aria-label="${["Go to page",this.current+3].join(" ")}"data-target="${this.current+3}"title="${["Go to page",this.current+3].join(" ")}"><span aria-hidden="true">…</span><span class="sr-only">${["Jump forward three pages, to page",this.current+3].join(" ")}</span></button></li>`:""}<li><button type="button"aria-label="${this.current===this.totalPages?["Already on page",this.totalPages].join(" "):["Go to page",this.totalPages].join(" ")}"title="${this.current===this.totalPages?["Already on page",this.totalPages].join(" "):["Go to page",this.totalPages].join(" ")}"${this.current===this.totalPages?["disabled",'aria-disabled="true"'].join(" "):`data-target="${this.totalPages}"`}>→</button></li></ol><p class="sr-only" aria-live="polite">Page${this.current}of${this.totalPages}</p></nav>`}_refreshTabIndexes(){const t=[...this.shadow.querySelectorAll("ol button")];t.forEach(t=>t.tabIndex=-1);const e=this.shadow.querySelector('button[aria-current="page"]'),a=t.find(t=>!t.disabled);(e||a)?.setAttribute("tabindex","0")}_focusCurrentIfNeeded(){if(!this._pendingFocus)return;const t=this.shadow.querySelector('button[aria-current="page"]')||this.shadow.querySelector('button[tabindex="0"]');t?.focus(),this._pendingFocus=!1}generatePages(){const{current:t,totalPages:e}=this;let a;a=1===t?1:t===e?Math.max(1,e-3+1):Math.max(1,t-1);const r=Math.min(e,a+3-1),i=[];for(let t=a;t<=r;t++)i.push(t);return i}render(){this.shadow.innerHTML=`${this.css}${this.html}`,this._refreshTabIndexes(),this._focusCurrentIfNeeded()}connectedCallback(){this._onClick||(this._onClick=t=>{const e=t.target.closest("button");e&&"true"!==e.getAttribute("aria-disabled")&&e.dataset.target&&(this._pendingFocus=!0,this.current=Number(e.dataset.target))},this.shadow.addEventListener("click",this._onClick)),this._onKeydown||(this._onKeydown=t=>{const e=t.target.closest("button");if(!e||!this.shadow.contains(e))return;if(t.altKey||t.ctrlKey||t.metaKey)return;const a=t=>{t<1||t>this.totalPages||(this._pendingFocus=!0,this.current=t)};switch(t.key){case"ArrowLeft":a(this.current-1),t.preventDefault();break;case"ArrowRight":a(this.current+1),t.preventDefault();break;case"Home":a(1),t.preventDefault();break;case"End":a(this.totalPages),t.preventDefault();break;default:return}},this.shadow.addEventListener("keydown",this._onKeydown)),this.render()}disconnectedCallback(){this._onClick&&this.shadow.removeEventListener("click",this._onClick),this._onKeydown&&this.shadow.removeEventListener("keydown",this._onKeydown)}attributeChangedCallback(t,e,a){e!==a&&(this.render(),"current"===t&&this.dispatchEvent(new CustomEvent("page-change",{detail:{page:Number(a)}})))}get total(){return Number.parseInt(this.getAttribute("total")||"0",10)}get current(){return Number(this.getAttribute("current"))||1}set current(t){this.setAttribute("current",t.toString())}get pageSize(){return Number.parseInt(this.getAttribute("page-size")||"10",10)}get totalPages(){return Math.ceil(this.total/this.pageSize)}}globalThis.customElements.define("wc-pagination",t)}();
